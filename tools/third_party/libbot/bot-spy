#!/bin/bash

set -euo pipefail

# This file is installed to <prefix>/bin.
readonly prefix=$(python -c 'import os; print(os.path.realpath(os.path.join("'"$0"'", os.pardir, os.pardir)))')

for jar_file in "$prefix/share/java/lcmtypes_*.jar" "$prefix/share/java/lcmspy_plugins_*.jar"; do
  if [ -f "$jar_file" ]; then
    export CLASSPATH="${CLASSPATH:+$CLASSPATH:}$jar_file"
  fi
done

exec "$prefix/bin/lcm-spy"
